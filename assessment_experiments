{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "5bf9a39e",
   "metadata": {
    "_cell_guid": "b1076dfc-b9ad-4769-8c92-a6c4dae69d19",
    "_uuid": "8f2839f25d086af736a60e9eeb907d3b93b6e0e5",
    "execution": {
     "iopub.execute_input": "2024-11-22T12:39:19.300714Z",
     "iopub.status.busy": "2024-11-22T12:39:19.300290Z",
     "iopub.status.idle": "2024-11-22T12:39:25.076744Z",
     "shell.execute_reply": "2024-11-22T12:39:25.075513Z"
    },
    "papermill": {
     "duration": 5.78386,
     "end_time": "2024-11-22T12:39:25.080167",
     "exception": false,
     "start_time": "2024-11-22T12:39:19.296307",
     "status": "completed"
    },
    "tags": []
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "       qid                 qname  \\\n",
      "0     QID2            MainBranch   \n",
      "1   QID127                   Age   \n",
      "2   QID296            Employment   \n",
      "3   QID308            RemoteWork   \n",
      "4   QID341                 Check   \n",
      "5   QID297      CodingActivities   \n",
      "6    QID25               EdLevel   \n",
      "7   QID276             LearnCode   \n",
      "8   QID281       LearnCodeOnline   \n",
      "9   QID331               TechDoc   \n",
      "10   QID32             YearsCode   \n",
      "11   QID34          YearsCodePro   \n",
      "12   QID31               DevType   \n",
      "13   QID29               OrgSize   \n",
      "14  QID278     PurchaseInfluence   \n",
      "15  QID279            BuyNewTool   \n",
      "16  QID330            BuildvsBuy   \n",
      "17  QID335           TechEndorse   \n",
      "18    QID6               Country   \n",
      "19   QID50              Currency   \n",
      "20   QID51             CompTotal   \n",
      "33  QID266            NEWSOSites   \n",
      "34  QID100           SOVisitFreq   \n",
      "35  QID101             SOAccount   \n",
      "36  QID102            SOPartFreq   \n",
      "37  QID334                 SOHow   \n",
      "38  QID106                SOComm   \n",
      "39  QID314              AISelect   \n",
      "40  QID315                AISent   \n",
      "41  QID324                 AIBen   \n",
      "42  QID316                 AIAcc   \n",
      "43  QID343             AIComplex   \n",
      "46  QID338              AIThreat   \n",
      "47  QID339              AIEthics   \n",
      "48  QID346          AIChallenges   \n",
      "49  QID299               TBranch   \n",
      "50  QID287                ICorPM   \n",
      "51  QID288               WorkExp   \n",
      "54  QID291         TimeSearching   \n",
      "55  QID292         TimeAnswering   \n",
      "56  QID342           Frustration   \n",
      "57  QID304      ProfessionalTech   \n",
      "58  QID332     ProfessionalCloud   \n",
      "59  QID333  ProfessionalQuestion   \n",
      "60  QID326              Industry   \n",
      "61  QID336                JobSat   \n",
      "62  QID337          JobSatPoints   \n",
      "63  QID286          SOTeamsUsage   \n",
      "64  QID132          SurveyLength   \n",
      "65  QID133            SurveyEase   \n",
      "\n",
      "                                             question force_resp    type  \\\n",
      "0   Which of the following options best describes ...       True      MC   \n",
      "1                                  What is your age?*       True      MC   \n",
      "2   Which of the following best describes your cur...       True      MC   \n",
      "3   Which best describes your current work situation?      False      MC   \n",
      "4   Just checking to make sure you are paying atte...       True      MC   \n",
      "5   Which of the following best describes the code...      False      MC   \n",
      "6   Which of the following best describes the high...       True      MC   \n",
      "7    How do you learn to code? Select all that apply.      False      MC   \n",
      "8   What online resources do you use to learn to c...      False      MC   \n",
      "9   What is the source of the technical documentat...      False      MC   \n",
      "10  Including any education, how many years have y...      False      MC   \n",
      "11  NOT including education, how many years have y...      False      MC   \n",
      "12  Which of the following describes your current ...      False      MC   \n",
      "13  Approximately how many people are employed by ...      False      MC   \n",
      "14  What level of influence do you, personally, ha...      False      MC   \n",
      "15  When buying a new tool or software, how do you...      False      MC   \n",
      "16  When asked to provide a recommendation for sol...      False      MC   \n",
      "17  What product feature do you care about most wh...      False      MC   \n",
      "18  Where do you live? <span style=\"font-weight: b...       True      MC   \n",
      "19  Which currency do you use day-to-day? If your ...       True      MC   \n",
      "20  What is your current total <b>annual</b> compe...      False      TE   \n",
      "33  Which of the following Stack Overflow sites ha...       True      MC   \n",
      "34  How frequently would you say you visit Stack O...      False      MC   \n",
      "35              Do you have a Stack Overflow account?      False      MC   \n",
      "36  How frequently would you say you participate i...      False      MC   \n",
      "37  How do you use Stack Overflow?  Select all tha...      False      MC   \n",
      "38  Do you consider yourself a member of the Stack...      False      MC   \n",
      "39  Do you currently use AI tools in your developm...       True      MC   \n",
      "40  How favorable is your stance on using AI tools...      False      MC   \n",
      "41  For the AI tools you use as part of your devel...      False      MC   \n",
      "42  How much do you trust the accuracy of the outp...      False      MC   \n",
      "43  How well do the AI tools you use in your devel...      False      MC   \n",
      "46  Do you believe AI is a threat to your current ...      False      MC   \n",
      "47  Which AI ethical responsibilities are most imp...      False      MC   \n",
      "48  What are the challenges to your company/whole ...      False      MC   \n",
      "49  <span style=\"font-size:16px;\">Would you like t...       True      MC   \n",
      "50  Are you an individual contributor or people ma...      False      MC   \n",
      "51  How many years of working experience do you have?      False  Slider   \n",
      "54  On an average day, how much time do you typica...      False      MC   \n",
      "55  On an average day, how much time do you typica...      False      MC   \n",
      "56  Which of these company challenges causes you t...      False      MC   \n",
      "57                                    My company has:      False      MC   \n",
      "58  At my company, our applications, databases and...      False      MC   \n",
      "59  When you have a technical question at work, wh...      False      MC   \n",
      "60      What industry is the company you work for in?      False      MC   \n",
      "61  How satisfied are you in your current professi...      False      MC   \n",
      "62  Assign points to the following attributes of y...      False      CS   \n",
      "63       Does your team use Stack Overflow for Teams?      False      MC   \n",
      "64  How do you feel about the length of the survey...      False      MC   \n",
      "65  How easy or difficult was this survey to compl...      False      MC   \n",
      "\n",
      "   selector                               SA Category              My Category  \n",
      "0      SAVR                         Basic Information             Demographics  \n",
      "1      SAVR                         Basic Information             Demographics  \n",
      "2      MAVR                         Basic Information             Demographics  \n",
      "3      SAVR                         Basic Information             Demographics  \n",
      "4      SAVR                         Basic Information                      NaN  \n",
      "5      MAVR                         Basic Information                      NaN  \n",
      "6      SAVR               Education, Work, and Career                Education  \n",
      "7      MAVR               Education, Work, and Career                Education  \n",
      "8      MAVR               Education, Work, and Career                Education  \n",
      "9      MAVR               Education, Work, and Career                Education  \n",
      "10       DL               Education, Work, and Career                      NaN  \n",
      "11       DL               Education, Work, and Career                      NaN  \n",
      "12     SAVR               Education, Work, and Career                 Job Role  \n",
      "13     SAVR               Education, Work, and Career  Company Characteristics  \n",
      "14     SAVR               Education, Work, and Career  Company Characteristics  \n",
      "15     MAVR               Education, Work, and Career  Company Characteristics  \n",
      "16     SAVR               Education, Work, and Career  Company Characteristics  \n",
      "17     MAVR               Education, Work, and Career  Company Characteristics  \n",
      "18       DL               Education, Work, and Career             Demographics  \n",
      "19       DL               Education, Work, and Career             Demographics  \n",
      "20       SL               Education, Work, and Career                      NaN  \n",
      "33     MAVR          Stack Overflow Usage + Community                      NaN  \n",
      "34     SAVR          Stack Overflow Usage + Community                      NaN  \n",
      "35     SAVR          Stack Overflow Usage + Community                      NaN  \n",
      "36     SAVR          Stack Overflow Usage + Community                      NaN  \n",
      "37     MAVR          Stack Overflow Usage + Community                      NaN  \n",
      "38     SAVR          Stack Overflow Usage + Community                      NaN  \n",
      "39     SAVR                   Artificial Intelligence  Artificial Intelligence  \n",
      "40     SAVR                   Artificial Intelligence  Artificial Intelligence  \n",
      "41     MAVR                   Artificial Intelligence  Artificial Intelligence  \n",
      "42     SAVR                   Artificial Intelligence  Artificial Intelligence  \n",
      "43     SAVR                   Artificial Intelligence  Artificial Intelligence  \n",
      "46     SAVR                   Artificial Intelligence  Artificial Intelligence  \n",
      "47     MAVR                   Artificial Intelligence  Artificial Intelligence  \n",
      "48     MAVR                   Artificial Intelligence  Artificial Intelligence  \n",
      "49     SAVR  Professional Developer Series (Optional)                      NaN  \n",
      "50     SAVR  Professional Developer Series (Optional)                 Job Role  \n",
      "51  HSLIDER  Professional Developer Series (Optional)                      NaN  \n",
      "54     SAVR  Professional Developer Series (Optional)                      NaN  \n",
      "55     SAVR  Professional Developer Series (Optional)                      NaN  \n",
      "56     MAVR  Professional Developer Series (Optional)                      NaN  \n",
      "57     MAVR  Professional Developer Series (Optional)  Company Characteristics  \n",
      "58     SAVR  Professional Developer Series (Optional)  Company Characteristics  \n",
      "59     SAVR  Professional Developer Series (Optional)                      NaN  \n",
      "60     SAVR  Professional Developer Series (Optional)  Company Characteristics  \n",
      "61      NPS  Professional Developer Series (Optional)         Job Satisfaction  \n",
      "62     VRTL  Professional Developer Series (Optional)                      NaN  \n",
      "63     SAVR  Professional Developer Series (Optional)                      NaN  \n",
      "64     MAVR                           Final Questions                      NaN  \n",
      "65     MAVR                           Final Questions                      NaN  \n"
     ]
    }
   ],
   "source": [
    "import pandas as pd\n",
    "import json\n",
    "\n",
    "survey_data_path = \"/kaggle/input/stackoverflow-survey-2024/survey_results_public.csv\"        \n",
    "survey_schema_path = \"/kaggle/input/stackoverflow-survey-2024/survey_results_schema.csv\"\n",
    "sa_categories  =  {\n",
    "    \"Basic Information\": [\n",
    "        \"MainBranch\", \"Age\", \"Employment\", \"RemoteWork\", \"Check\", \"CodingActivities\"\n",
    "    ],\n",
    "    \"Education, Work, and Career\": [\n",
    "        \"EdLevel\", \"LearnCode\", \"LearnCodeOnline\", \"TechDoc\", \"YearsCode\", \n",
    "        \"YearsCodePro\", \"DevType\", \"OrgSize\", \"PurchaseInfluence\", \"BuyNewTool\", \n",
    "        \"BuildvsBuy\", \"TechEndorse\", \"Country\", \"Currency\", \"CompTotal\"\n",
    "    ],\n",
    "    \"Technology and Tech Culture\": [\n",
    "        \"Language\", \"Database\", \"Platform\", \"Webframe\", \"Embedded\", \"MiscTech\", \n",
    "        \"ToolsTech\", \"NEWCollabTools\", \"OpSys\", \"OfficeStackAsync\", \n",
    "        \"OfficeStackSync\", \"AISearchDev\"\n",
    "    ],\n",
    "    \"Stack Overflow Usage + Community\": [\n",
    "        \"NEWSOSites\", \"SOVisitFreq\", \"SOAccount\", \"SOPartFreq\", \"SOHow\", \"SOComm\"\n",
    "    ],\n",
    "    \"Artificial Intelligence\": [\n",
    "        \"AISelect\", \"AISent\", \"AIBen\", \"AIAcc\", \"AIComplex\", \"AITool\", \n",
    "        \"AINext\", \"AIThreat\", \"AIEthics\", \"AIChallenges\"\n",
    "    ],\n",
    "    \"Professional Developer Series (Optional)\": [\n",
    "        \"TBranch\", \"ICorPM\", \"WorkExp\", \"Knowledge\", \"Frequency\", \"TimeSearching\", \n",
    "        \"TimeAnswering\", \"Frustration\", \"ProfessionalTech\", \"ProfessionalCloud\", \n",
    "        \"ProfessionalQuestion\", \"Industry\", \"JobSat\", \"JobSatPoints\", \"SOTeamsUsage\"\n",
    "    ],\n",
    "    \"Final Questions\": [\"SurveyLength\", \"SurveyEase\"]\n",
    "}\n",
    "\n",
    "my_categories = {\n",
    "    \"Company Characteristics\": [\n",
    "        \"OrgSize\", \"PurchaseInfluence\", \"BuyNewTool\", \"BuildvsBuy\", \n",
    "        \"TechEndorse\", \"ProfessionalTech\", \"ProfessionalCloud\", \"Industry\"\n",
    "    ],\n",
    "    \"Demographics\": [\n",
    "        \"MainBranch\", \"Age\", \"Employment\", \"RemoteWork\", \"Country\", \"Currency\"\n",
    "    ],\n",
    "    \"Education\": [\n",
    "        \"EdLevel\", \"LearnCode\", \"LearnCodeOnline\", \"TechDoc\"\n",
    "    ],\n",
    "    \"Job Role\": [\n",
    "        \"DevType\", \"ICorPM\"\n",
    "    ],\n",
    "    \"Job Satisfaction\": [\n",
    "        \"JobSat\"\n",
    "    ],\n",
    "    \"Artificial Intelligence\": [\n",
    "        \"AISelect\", \"AISent\", \"AIBen\", \"AIAcc\", \"AIComplex\", \n",
    "        \"AITool\", \"AINext\", \"AIThreat\", \"AIEthics\", \"AIChallenges\"\n",
    "    ]\n",
    "}\n",
    "\n",
    "\n",
    "solution_col = \"CompTotal\"\n",
    "\n",
    "\n",
    "raw_df = pd.read_csv(survey_data_path)\n",
    "all_cols = list(raw_df.columns.values)\n",
    "\n",
    "schema_df = pd.read_csv(survey_schema_path)\n",
    "qname_to_sa_category = {qname: category for category, qnames in sa_categories.items() for qname in qnames}\n",
    "qname_to_my_category = {qname: category for category, qnames in my_categories.items() for qname in qnames}\n",
    "\n",
    "# Add the categories\n",
    "schema_df[\"SA Category\"] = schema_df[\"qname\"].map(qname_to_sa_category)\n",
    "schema_df[\"My Category\"] = schema_df[\"qname\"].map(qname_to_my_category)\n",
    "\n",
    "\n",
    "# ignore matrix cols for now\n",
    "schema_df_no_matrix = schema_df.loc[schema_df[\"type\"] != \"Matrix\"].dropna(subset=[\"force_resp\"])\n",
    "cols = schema_df_no_matrix['qname'].tolist()\n",
    "# print(cols)\n",
    "print(schema_df_no_matrix)\n",
    "\n",
    "# random_sample = raw_df.sample(n=10, random_state=42)\n",
    "# print(random_sample)\n",
    "\n",
    "\n"
   ]
  }
 ],
 "metadata": {
  "kaggle": {
   "accelerator": "none",
   "dataSources": [
    {
     "datasetId": 5963963,
     "sourceId": 9742924,
     "sourceType": "datasetVersion"
    }
   ],
   "dockerImageVersionId": 30786,
   "isGpuEnabled": false,
   "isInternetEnabled": false,
   "language": "python",
   "sourceType": "notebook"
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.10.14"
  },
  "papermill": {
   "default_parameters": {},
   "duration": 9.178243,
   "end_time": "2024-11-22T12:39:25.604368",
   "environment_variables": {},
   "exception": null,
   "input_path": "__notebook__.ipynb",
   "output_path": "__notebook__.ipynb",
   "parameters": {},
   "start_time": "2024-11-22T12:39:16.426125",
   "version": "2.6.0"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
